<% if conversation && conversation.transcript.present? %>
  <% conversation.transcript.each do |message| %>
    <% role = (message[:role] || message["role"]).to_s %>
    <% content = message[:content] || message["content"] %>
    <% next if role == "system" %>
    <%= ds_chat_bubble(role: role, message: content) %>
  <% end %>
<% else %>
  <%= ds_empty_state(title: "No messages yet. Start a conversation.") %>
<% end %>
